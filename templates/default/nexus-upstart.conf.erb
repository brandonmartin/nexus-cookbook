# nexus - Nexus OSS
description "Nexus OSS"

start on runlevel [<%= @runlevels %>]
stop on runlevel [!<%= @runlevels %>]

env NEXUS_HOME="<%= @nexus_home %>"
env PLATFORM="<%= @platform %>"
env PIDFILE="<%= @nexus_pid %>/nexus.pid"

env WRAPPER_CMD="<%= @nexus_home %>/bin/jsw/<%= @platform %>/wrapper"
env WRAPPER_CONF="<%= @nexus_home %>/bin/jsw/conf/wrapper.conf"

respawn

<% unless @respawn_limit.nil? %>
respawn limit <%= @respawn_limit %>
<% end %>

console output

setuid <%= @nexus_user %>
setgid <%= @nexus_group %>

exec ${WRAPPER_CMD} "${WRAPPER_CONF}" wrapper.syslog.ident=nexus wrapper.pidfile="${PIDFILE}" wrapper.daemonize=FALSE

